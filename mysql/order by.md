# order by 排序语句执行
## 全字段排序
mysql需要将查询结果存入到sort buffer中进行排序再返回。默认是将结果集中的所有字段取出放入sort buffer。
如果结果集太大，内存不够，就需要外部文件排序。这取决于`sort_buffer_size`参数，如果结果集中数据量大于该值就会在文件中排序。

## rowid排序
很显然如果结果集字段较多，即单行数据量较大，sort buffer的内存空间就很可能不够用。mysql的参数`max_length_for_sort_data`用于指定单行数据量大小如果超过该阈值，
会采用rowid排序算法。该算法仅会在sort buffer中放入rowid和待排序的字段。排序后再根据rowid进行回表返回结果集。

## 不排序
如果待排序数据本身已经有序，那么就不需要排序。也就是根据索引查到的数据本身已经是有序的。比如带有时间的索引：name_creat_time。

## 随机排序
使用`order by rand()`，该语句的执行会生成一张临时表。mysql首先读入数据集，此时没有排序的列，所以为每一行生成一个随机数，这样就得到了一张新的临时表。
然后对临时表进行rowid排序，这里的rowid是mysql自己生成的。排序后根据rowid先回临时表，再回原始数据集返结果。