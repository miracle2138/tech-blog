## 缓存设计点
缓存这个话题很大，这里指的是应用程序设计缓存-db的模式。
一般使用cache-aside，该模式涉及两点：
- 缓存加载：如果缓存miss，从db回源，同时回写缓存
- 缓存更新：先更新db，再删除/更新缓存。通常基于binlog方式。

### 注意点
- 缓存加载时，如果数据在db里也不存在，会导致缓存穿透，即每一次请求都回源db，解决办法是db不存在就在缓存里写一个empty holder值，代表已经回源过db了，读取时过滤掉
- 缓存更新时，优先更新db，只有在db中写入成功才算成功。对于缓存更新方式，推荐删除缓存。因为如果是更新缓存，两个并发的更新操作可能导致db-缓存数据不一致。但即使是删除，也会存在
  极端情况下出现不一致情况（读写并发情景）。
- 过期时间，上面说了无论哪种方式，由于对db和缓存的操作不是事务，必然会出现不一致情况，因此给缓存加过期时间很必要，可以保证最终一致性

### 参考
- [0](https://juejin.cn/post/6844903604998914055)
- [1](https://blog.csdn.net/u010900754/article/details/92088107)
