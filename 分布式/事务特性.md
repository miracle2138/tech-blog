## 事务特性

事务特性指的是ACID
- A，原子性。指的是要么全部成功要么全部失败；
- C，一致性。指的是事务是一个整体，外界只能看到事务发生前以及事务发生后的状态，不能看到中间状态。某种程度上和A原子性类似；
- I，隔离性。指的是多个事务的并发运行在效果上和串行运行一样，不能互相干扰。追求隔离性会导致性能下降。所以按照隔离程度，定义了四种隔离级别，由弱到强依次是：读未提交、读已提交、可重复度和序列化。其中序列化是最强的级别，所有读写操作均2PC加锁。
  隔离性的实现方式有两种：锁和MVCC；
    - 锁：通过加锁方式进行并发事务的隔离。事务中按照2PC方式加锁。所有写操作都是加锁的。读操作在不同隔离级别下加锁的方式不同，在序列化级别下，默认加读锁。在其他级别下默认不加锁，可以使用for update或者in share mode语句强制加读锁。
    - MVCC：是一种基于快照的解决读写隔离的机制，在非序列化隔离级别下生效。所有读操作默认都是快照读，不加锁。能读到什么内容取决于隔离级别。undo log
- D，持久性。提交成功，数据不会丢。redo log

分布式事务场景
在分布式事务场景下，部分特性实现会变得复杂。例如：
- C，分布式事务涉及多个本地事务，会存在某些事务已提交，某些事务未提交的情况。这时外界会读到事务的中间状态。可以采用序列化方式解决。
- I，部分分布式事务的实现方案是不在RM层做事务特性，这样也就无法借助RM本身的I特性来实现，需要在RM的上层加锁解决。

参考：
[0](https://www.infoq.cn/article/g1avp9fua6cdoyralv4r)
