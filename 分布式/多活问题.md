## 异地多活数据问题
### 写入冲突问题
异地多活多主写入场景，会有数据冲突或者一致性问题。举个例子，有南北方两个数据中心，均有主库，数据会双向同步。如果南北用户都同时修改一条记录，比如南方用户改为x，
北方用户改为y，首先本地数据中心生效，然后数据会同步到对向机房，可能会产生数据不一致。类似的问题还有唯一键约束，也会造成同步冲突。

解决的办法是将多主写入根据业务字段路由为单主写入。比如我们想修改视频的点赞数，可以根据视频数据的机房，将对该视频的写入路由到对应的机房，这样同一视频的数据
就出现在同一机房，不会冲突了。又比如要修改用户相关的数据，可以根据用户的注册地路由到某一个机房，避免同一用户的数据冲突。
当然这种方案也有弊端，会导致跨机房调用，延迟偏高，牺牲了可用性换取一致性。

异地多活的读写分离问题，单个数据中心的读写分离，由于主库从库在同一地域，延迟较低，业务上基本可以接受。对于多数据中心的场景，
如果写入和读取不在同一机房，由于跨机房同步延迟较高，使得先写后读的读操作大概率读不到最新的数据。对于一致性要求较高的业务就无法接受了，可以采取同上的办法，将读请求也进行机房的路由，
也是牺牲了可用性换取一致性的做法。
