# GMP模型与协程简介

## 简介
Go语言的协程本质上用户态线程，与内核线程是N:M对应关系。
由于1:1以及1:N的线程模型都存在一定的弊端。所以go语言提出了GMP模型来实现M:N模式。

## GMP概念
- G：协程，使用go关键字可以启动一个用户协程。属于用户级线程。
- M：内核级线程。G需要放在M上运行。
- P：一个中间层，拥有G的运行队列，同时绑定若干个M，实现特定的调度策略，让G可以以一定并发度在M上运行。

## 演进
早期只有GM模型。G由一个全局队列统一管理。M是一个线程池，每一个M都从G队列里取G运行。
这个模型的弊端有：
- G的全局队列会被并发操作，需要加锁
- 局部性较差，M1创建的G执行时，可能分配到M2

## GMP机制
